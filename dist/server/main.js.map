{"version":3,"sources":["webpack://gb_javascript/./src/server/cart.js","webpack://gb_javascript/./src/server/cartRouter.js","webpack://gb_javascript/./src/server/handler.js","webpack://gb_javascript/./src/server/logHandler.js","webpack://gb_javascript/external \"express\"","webpack://gb_javascript/external \"fs\"","webpack://gb_javascript/external \"moment\"","webpack://gb_javascript/webpack/bootstrap","webpack://gb_javascript/./src/server/server.js"],"names":["add","cart","req","contents","push","body","JSON","stringify","change","find","el","id_product","params","id","quantity","remove","cartContent","splice","indexOf","module","exports","express","require","fs","handler","logHandler","router","Router","get","res","readFile","err","data","sendStatus","result","text","send","post","put","actions","action","file","newCart","parse","writeFile","moment","logs","addLog","log","cartLog","Product_name","name","Action","Time","format","newLog","console","app","use","json","listen"],"mappings":"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","file":"main.js","sourcesContent":["let add = (cart, req) => {\n    cart.contents.push(req.body);\n    return JSON.stringify(cart, null, 4);\n};\nlet change = (cart, req) => {\n    let find = cart.contents.find(el => el.id_product === +req.params.id);\n    find.quantity += req.body.quantity;\n    return JSON.stringify(cart, null, 4);\n};\n\nlet remove = (cart, req) => {\n    let find = cart.contents.find(el => +el.id_product === req.body.id_product);\n    let cartContent = cart.contents;\n    cartContent.splice(cartContent.indexOf(find), 1);\n    return JSON.stringify(cart, null, 4);\n};\n\nmodule.exports = {\n    add,\n    change,\n    remove\n};\n","const express = require('express');\nconst fs = require('fs');\nconst handler = require('./handler');\nconst logHandler = require('./logHandler');\nconst router = express.Router();\n\nrouter.get('/', (req, res) => {\n    fs.readFile('dist/server/db/userCart.json', 'utf8', (err, data) => {\n        if(err){\n            res.sendStatus(404, JSON.stringify({result: 0, text: err}));\n        } else {\n            res.send(data);\n        }\n    })\n});\n\nrouter.post(`/:id/:name`, (req, res) => {\n    handler(req, res, 'add', `dist/server/db/userCart.json`);\n    logHandler(req, res, 'add', `dist/server/db/stats.json`)\n});\nrouter.put(`/:id/:name`, (req, res) => {\n    handler(req, res, 'change', `dist/server/db/userCart.json`);\n    logHandler(req, res, 'change', `dist/server/db/stats.json`)\n});\n\nrouter.delete(`/:id/:name`, (req, res) => {\n    handler(req, res, 'remove', `dist/server/db/userCart.json`);\n    logHandler(req, res, 'remove', `dist/server/db/stats.json`)\n});\n\nmodule.exports = router;","const fs = require( 'fs' );\nconst cart = require( './cart' );\n\nconst actions = {\n    add: cart.add,\n    change: cart.change,\n    remove: cart.remove,\n};\n\nconst handler = ( req, res, action, file ) => {\n    fs.readFile( file, 'utf8', ( err, data ) => {\n        if ( err ) {\n            res.sendStatus( 404, JSON.stringify( { result: 0, text: err } ) );\n        } else {\n            let newCart = actions[ action ]( JSON.parse( data ), req );\n            fs.writeFile( file, newCart, ( err ) => {\n                if ( err ) {\n                    res.send( JSON.stringify( { result: 0, text: err } ) );\n                } else {\n                    res.send( JSON.stringify( { result: 1, text: 'SUCCESS' } ) );\n                }\n            } );\n        }\n    } )\n};\n\nmodule.exports = handler;","const fs = require( 'fs' );\r\nconst moment = require( 'moment' );\r\n\r\nconst logs = {\r\n    add: 'Added to cart',\r\n    change: 'Changed data in cart',\r\n    remove: 'Removed from cart',\r\n};\r\n\r\nlet addLog = (log, cartLog) => {\r\n    log.push(cartLog);\r\n    return JSON.stringify(log, null, 4);\r\n};\r\n\r\nconst logHandler = ( req, res, action, file ) => {\r\n    fs.readFile( file, 'utf8', ( err, data ) => {\r\n        if ( err ) {\r\n            res.sendStatus( 404, JSON.stringify( { result: 0, text: err } ) );\r\n        } else {\r\n            let cartLog = {\r\n                Product_name: req.params.name,\r\n                Action: logs[ action ],\r\n                Time: `${ moment().format( 'MMMM Do YYYY, h:mm:ss a' ) }`\r\n            };\r\n            let newLog = addLog( JSON.parse( data ), cartLog );\r\n            fs.writeFile( file, newLog, ( err ) => {\r\n                if ( err ) {\r\n                    console.log('Error');\r\n                } else {\r\n                    console.log('Success');\r\n                }\r\n            } );\r\n        }\r\n    } )\r\n};\r\nmodule.exports = logHandler;","module.exports = require(\"express\");","module.exports = require(\"fs\");","module.exports = require(\"moment\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const express = require('express');\nconst fs = require('fs');\nconst router = require('./cartRouter');\nconst app = express();\n\napp.use(express.json());\napp.use('/', express.static('dist/public'));\napp.use('/api/cart', router);\n\napp.get('/api/products', (req, res) => {\n    fs.readFile('dist/server/db/products.json', 'utf8', (err, data) => {\n        if(err){\n            res.sendStatus(404, JSON.stringify({result: 0, text: err}));\n        } else {\n            res.send(data);\n        }\n    })\n});\n\napp.listen(3000, () => console.log('Listen on port 3000...'));"],"sourceRoot":""}